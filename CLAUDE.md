# CLAUDE.md

æœ¬æ–‡ä»¶ä¸º Claude Code (claude.ai/code) åœ¨å¤„ç†æ­¤ä»£ç åº“æ—¶æä¾›å¼€å‘è§„èŒƒæŒ‡å¯¼ã€‚

## ğŸš¨ MVPåŸåˆ™ - æœ€é«˜ä¼˜å…ˆçº§

### å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™
è¿™æ˜¯ä¸€ä¸ª**æœ€å°å¯è¡Œäº§å“ (MVP)**ï¼Œä¸¥æ ¼éµå¾ªå¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ï¼ˆ"å¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“"ï¼‰ã€‚

âš ï¸ **ä¸¥ç¦è‡ªè¡Œå®ç°æœªæ˜ç¡®è¦æ±‚çš„åŠŸèƒ½**ï¼š
- âŒ ä¸å¾—æ·»åŠ å¼€å‘è€…æœªæ˜ç¡®è¦æ±‚çš„ä»»ä½•åŠŸèƒ½ã€ä¾èµ–æˆ–æ–‡æ¡£
- âœ… åªå®ç°æ˜ç¡®è¦æ±‚æˆ–æ ¸å¿ƒç³»ç»Ÿè¿è¡Œç»å¯¹å¿…éœ€çš„å†…å®¹
- âœ… å§‹ç»ˆä¿æŒæœ€å°å¯è¡ŒèŒƒå›´

### é¡¹ç›®ä¸æ¨¡å—æ–‡æ¡£
- ğŸ“— **[é¡¹ç›®æ€»è§ˆä¸æ¶æ„](./README.md)** - ç³»ç»Ÿä»‹ç»ã€æ ¸å¿ƒç‰¹æ€§ã€å¿«é€Ÿå¼€å§‹
- ğŸ“• **[å¼€å‘è€…è¯¦ç»†æŒ‡å—](./src/README.md)** - æ¨¡å—æ¶æ„ã€APIæ–‡æ¡£ã€æœ€ä½³å®è·µ

---

## å¼€å‘è¦æ±‚

### ç¯å¢ƒé…ç½®

**è¦æ±‚**: Python 3.12+ï¼Œä½¿ç”¨ `uv` ç®¡ç†

**ç¯å¢ƒåˆå§‹åŒ–**:
```bash
# åˆå§‹åŒ–uvç¯å¢ƒ
uv venv  # åˆ›å»º.venvè™šæ‹Ÿç¯å¢ƒ
uv pip install -e .  # å®‰è£…é¡¹ç›®ä¾èµ–
```

### ä¸¥æ ¼è§„èŒƒ

**âœ… å¿…é¡»éµå¾ª**:
- **ç¯å¢ƒç®¡ç†**: æ‰€æœ‰å¼€å‘å¿…é¡»ä½¿ç”¨uvç¯å¢ƒ: `uv run python` è€Œä¸æ˜¯ `python3`
- **è™šæ‹Ÿç¯å¢ƒ**: ä½ç½®: `.venv` (ç”±uvè‡ªåŠ¨ç®¡ç†)
- **æµ‹è¯•æ‰§è¡Œ**: ä½¿ç”¨ `uv run pytest` æˆ–æµ‹è¯•è„šæœ¬
- **ç±»å‹å®‰å…¨**: æ‰€æœ‰å‡½æ•°ã€æ–¹æ³•å’Œå˜é‡å¿…é¡»ä½¿ç”¨å®Œæ•´ç±»å‹æç¤º
- **Python 3.12+ ç‰¹æ€§**: ä½¿ç”¨ Union Typesã€Type Guardã€Generic ç­‰æ–°ç‰¹æ€§
- **æ³›å‹çº¦æŸ**: å……åˆ†åˆ©ç”¨ TypeVarã€Protocol ç­‰é«˜çº§ç±»å‹ç³»ç»ŸåŠŸèƒ½
- **ä»£ç è´¨é‡**: æ‰€æœ‰ä»£ç ç¼–è¾‘å®Œæˆåå¿…é¡»é€šè¿‡ pyright å’Œ pylint æ£€æŸ¥

**âŒ ç¦æ­¢æ“ä½œ**:
- ä½¿ç”¨ç³»ç»Ÿpython: `python3`, `pip3` ç­‰å‘½ä»¤
- æ‰‹åŠ¨å®‰è£…ä¾èµ–: å¿…é¡»é€šè¿‡uvç®¡ç†
- æ·»åŠ æœªæ˜ç¡®è¦æ±‚çš„åŠŸèƒ½ã€ä¾èµ–æˆ–åŠŸèƒ½
- å®ç°å…·ä½“çš„ LLM æä¾›å•†ã€ç½‘ç»œå±‚ã€æŒä¹…åŒ–æˆ–ä»»ä½•æ‰©å±•ï¼ˆéœ€æ˜ç¡®æ‰¹å‡†ï¼‰
- æ·»åŠ è¶…å‡ºæ ¸å¿ƒåŠŸèƒ½å¿…è¦æ€§çš„æ–‡æ¡£

### å‘½ä»¤ç¤ºä¾‹

```bash
# æ­£ç¡®çš„æ–¹å¼
uv run python main.py
uv run pytest tests/
uv run python tests/state_machine/test_state_machine.py

# è¿è¡Œä¸»ç¤ºä¾‹
uv run python main.py

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest tests/ -v --cov=src --cov-report=term-missing

# ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆå¿…é¡»åœ¨æ‰€æœ‰ä»£ç ç¼–è¾‘åæ‰§è¡Œï¼‰
uv run pyright src/
uv run pylint src/
```

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

**å¼‚æ­¥ä¼˜å…ˆ**: æ‰€æœ‰æ ¸å¿ƒæ¥å£æ”¯æŒå¹¶å‘æ‰§è¡Œ
**æ¥å£é©±åŠ¨**: æ¥å£å’Œå®ç°ä¹‹é—´çš„æ¸…æ™°åˆ†ç¦»
**ç±»å‹å®‰å…¨**: ä¸¥æ ¼éµå¾ªç±»å‹æç¤ºï¼Œä½¿ç”¨é™æ€ç±»å‹æ£€æŸ¥å·¥å…·ç¡®ä¿ç±»å‹å®‰å…¨
**ç»Ÿä¸€ç¼©è¿›**: ä»£ç ç¼©è¿›ç»Ÿä¸€ä½¿ç”¨tabï¼Œè¦æ±‚ç¼©è¿›ç¾è§‚

---

## ç±»å‹å®‰å…¨è¦æ±‚

### ä¸ºä»€ä¹ˆç±»å‹å®‰å…¨è‡³å…³é‡è¦ï¼Ÿ

1. **é˜²æ­¢è¿è¡Œæ—¶é”™è¯¯**ï¼šç±»å‹æ£€æŸ¥å¯ä»¥åœ¨ç¼–ç é˜¶æ®µå‘ç°æ½œåœ¨çš„ç±»å‹ä¸åŒ¹é…é—®é¢˜ï¼Œé¿å…è¿è¡Œæ—¶å´©æºƒ
2. **æå‡ä»£ç å¯ç»´æŠ¤æ€§**ï¼šæ˜ç¡®çš„ç±»å‹æ³¨è§£è®©ä»£ç æ›´æ˜“ç†è§£ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
3. **IDE æ”¯æŒå¢å¼º**ï¼šç°ä»£ IDE åˆ©ç”¨ç±»å‹ä¿¡æ¯æä¾›æ›´å¥½çš„ä»£ç è¡¥å…¨ã€é‡æ„å’Œå¯¼èˆªåŠŸèƒ½
4. **å›¢é˜Ÿåä½œæ•ˆç‡**ï¼šç±»å‹å®šä¹‰ä½œä¸ºä»£ç å¥‘çº¦ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬

### æ ¸å¿ƒè¦æ±‚

- **å‡½æ•°ç­¾åå¿…é¡»å®Œæ•´æ ‡æ³¨**ï¼š

  ```python
  # âœ… æ­£ç¡®
  def process_task(
      task: ITask[TaskState, TaskEvent],
      context: dict[str, Any]
  ) -> TaskEvent:
      return TaskEvent.DONE

  # âŒ é”™è¯¯ - ç¼ºå°‘ç±»å‹æ³¨è§£
  def process_task(task, context):
      return TaskEvent.DONE
  ```

- **ä½¿ç”¨ç°ä»£ Python ç±»å‹ç‰¹æ€§**ï¼š

  ```python
  # âœ… ä½¿ç”¨ Union Types (Python 3.10+)
  from typing import Union
  Result = Union[str, None]

  # âœ… ä½¿ç”¨ TypeVar å®ç°æ³›å‹
  from typing import TypeVar, Generic
  T = TypeVar('T')

  class Container(Generic[T]):
      def get(self) -> T: ...
  ```

- **æ¥å£å¥‘çº¦å¿…é¡»æ˜ç¡®**ï¼š

  ```python
  # âœ… IScheduler æ¥å£æ˜ç¡®å®šä¹‰ç±»å‹çº¦æŸ
  class IScheduler(ABC, Generic[StateT, EventT]):
      @abstractmethod
      async def schedule(
          self,
          context: dict[str, Any],
          queue: Queue[Message],
          fsm: ITask[StateT, EventT]
      ) -> None: ...
  ```

- **ä¸¥æ ¼éµå¾ªç±»å‹æ£€æŸ¥ç»“æœ**ï¼š
  - Pyright é›¶é”™è¯¯æ˜¯æœ€ä½è¦æ±‚
  - è­¦å‘Šå¿…é¡»è¯„ä¼°å…¶åˆç†æ€§
  - ä¸å…è®¸é€šè¿‡ `# type: ignore` å±è”½ç±»å‹é”™è¯¯ï¼ˆé™¤éæœ‰å……åˆ†ç†ç”±ï¼‰

---

## ä»£ç è´¨é‡ä¿è¯

æ‰€æœ‰ä»£ç ç¼–è¾‘å®Œæˆåï¼Œå¿…é¡»æ‰§è¡Œä»¥ä¸‹è´¨é‡æ£€æŸ¥æµç¨‹ï¼š

### å¿…éœ€æ£€æŸ¥

1. **pyright æ£€æŸ¥**: ç¡®ä¿ç±»å‹æ­£ç¡®æ€§å’Œç°ä»£ Python ç‰¹æ€§çš„æ­£ç¡®ä½¿ç”¨

   ```bash
   uv run pyright src/
   ```

2. **pylint æ£€æŸ¥**: ç¡®ä¿ä»£ç é£æ ¼ã€ç»“æ„å’Œæœ€ä½³å®è·µ

   ```bash
   uv run pylint src/
   ```

### æ£€æŸ¥æ ‡å‡†

- **pyright**: å¿…é¡»é›¶é”™è¯¯ï¼Œè­¦å‘Šåº”è¯„ä¼°å¹¶ä¿®å¤
- **pylint**: è¯„åˆ† â‰¥ 8.0/10ï¼Œå…³é”®é”™è¯¯å¿…é¡»ä¿®å¤

### é›†æˆåˆ°å¼€å‘æµç¨‹

- æ¯æ¬¡ç¼–è¾‘ä»£ç åå¿…é¡»æ‰§è¡Œä¸Šè¿°æ£€æŸ¥
- æäº¤å‰å¿…é¡»ç¡®ä¿æ‰€æœ‰æ£€æŸ¥é€šè¿‡
- CI/CD æµæ°´çº¿åº”åŒ…å«è¿™äº›æ£€æŸ¥æ­¥éª¤

---

## æµ‹è¯•è¦æ±‚

### æµ‹è¯•åŸåˆ™

- **åŠŸèƒ½éªŒè¯ä¼˜å…ˆ**: ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼Œä¸è¿›è¡Œæ€§èƒ½æµ‹è¯•ã€è´Ÿè½½æµ‹è¯•æˆ–å¹¶å‘æµ‹è¯•
- **ç‹¬ç«‹æ€§**: æ¯ä¸ªæµ‹è¯•æ–¹æ³•ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•çš„æ‰§è¡Œé¡ºåº
- **å¯é‡å¤æ€§**: ä½¿ç”¨å›ºå®šçš„æµ‹è¯•æ•°æ®ï¼Œç¡®ä¿æµ‹è¯•ç»“æœçš„ä¸€è‡´æ€§
- **æ¸…æ™°æ€§**: æµ‹è¯•æ„å›¾æ˜ç¡®ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤

### è¦†ç›–ç‡è¦æ±‚

- **æ•´ä½“è¦†ç›–ç‡**: â‰¥ 80%
- **åˆ†æ”¯è¦†ç›–ç‡**: â‰¥ 75%
- **ç»Ÿä¸€æ ‡å‡†**: æ‰€æœ‰æ¨¡å—é‡‡ç”¨ç›¸åŒçš„è¦†ç›–ç‡è¦æ±‚
### æµ‹è¯•éš”ç¦»æœºåˆ¶

**ç¯å¢ƒéš”ç¦»**: æ¯ä¸ªæµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•ç¯å¢ƒ

**æ•°æ®éš”ç¦»**: æµ‹è¯•æ•°æ®ä¸ç›¸äº’æ±¡æŸ“ï¼Œä½¿ç”¨ Mock å¯¹è±¡éš”ç¦»å¤–éƒ¨ä¾èµ–

**çŠ¶æ€éš”ç¦»**: æµ‹è¯•çŠ¶æ€åœ¨æµ‹è¯•é—´å®Œå…¨é‡ç½®ï¼Œä½¿ç”¨ setUp/tearDown æ¸…ç†

**Mock ä½¿ç”¨åŸåˆ™**:
- ä½¿ç”¨ Mock å¯¹è±¡éš”ç¦»æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œç­‰å¤–éƒ¨ä¾èµ–
- éªŒè¯äº¤äº’è¡Œä¸ºè€Œéå…·ä½“å®ç°
- é¿å…è¿‡åº¦ Mockï¼Œä¿æŒæµ‹è¯•çš„çœŸå®æ€§
- ä½¿ç”¨å›ºå®šçš„ Mock é…ç½®ç¡®ä¿æµ‹è¯•ç»“æœç¡®å®š

### æµ‹è¯•ç»“æ„ç»„ç»‡

#### ç¤ºèŒƒå‚è€ƒ

`tests/state_machine/` ç›®å½•ä½œä¸ºæµ‹è¯•ç»„ç»‡å’Œç¼–å†™çš„ç¤ºèŒƒï¼ŒåŒ…å«ï¼š
- **README.md**: æµ‹è¯•è¯´æ˜å’Œæ‰§è¡ŒæŒ‡å—
- **run_tests.sh**: æä¾›è¯¦ç»†æ—¥å¿—çš„æµ‹è¯•å…¥å£è„šæœ¬
- **test_*.py**: ç¤ºèŒƒæµ‹è¯•æ–‡ä»¶ï¼Œå±•ç¤ºçŠ¶æ€æœºæµ‹è¯•ç¼–å†™æ¨¡å¼


#### æ¨¡å—æµ‹è¯•è„šæœ¬è®¾è®¡æ ‡å‡†

æ¯ä¸ªæµ‹è¯•æ¨¡å—åº”æä¾›ä¸¤ç§æµ‹è¯•å…¥å£è„šæœ¬ï¼š

**1. Shellè„šæœ¬ç‰ˆæœ¬ (`run_tests.sh`)**
- ç›®æ ‡ç”¨æˆ·: Linux/Mac/WSLç”¨æˆ·
- æ ¸å¿ƒåŠŸèƒ½:
  - å½©è‰²è¾“å‡ºå’ŒçŠ¶æ€æ˜¾ç¤º
  - æ™ºèƒ½ç¯å¢ƒæ£€æµ‹ï¼ˆuvä¼˜å…ˆï¼‰
  - åˆ†ç±»æµ‹è¯•æ‰§è¡Œ
  - è¦†ç›–ç‡æŠ¥å‘Šç”Ÿæˆ
  - **ä»£ç è´¨é‡æ£€æŸ¥**: é›†æˆ pyright å’Œ pylint æ£€æŸ¥
- è®¾è®¡è¦æ±‚:
  - ä½¿ç”¨å‡½æ•°åŒ–è®¾è®¡ï¼Œæ¯ä¸ªæµ‹è¯•ç±»å‹ç‹¬ç«‹å‡½æ•°
  - æä¾›è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯å’Œä½¿ç”¨ç¤ºä¾‹
  - åŒ…å«é”™è¯¯è¯Šæ–­å’Œè§£å†³å»ºè®®
  - æ”¯æŒverboseå’Œsingleæµ‹è¯•æ¨¡å¼

**2. Pythonè„šæœ¬ç‰ˆæœ¬ (`run_tests.py`)**
- ç›®æ ‡ç”¨æˆ·: è·¨å¹³å°å…¼å®¹æ€§
- æ ¸å¿ƒåŠŸèƒ½:
  - argparseå‚æ•°è§£æ
  - è‡ªåŠ¨é¡¹ç›®æ ¹ç›®å½•æ£€æµ‹
  - uv/pythonç¯å¢ƒæ™ºèƒ½é€‰æ‹©
  - ä¾èµ–è‡ªåŠ¨å®‰è£…
  - **ä»£ç è´¨é‡æ£€æŸ¥**: é›†æˆ pyright å’Œ pylint æ£€æŸ¥
- è®¾è®¡è¦æ±‚:
  - ä½¿ç”¨argparseæä¾›å®Œæ•´çš„å‘½ä»¤è¡Œç•Œé¢
  - æ”¯æŒæ‰€æœ‰Shellè„šæœ¬çš„åŠŸèƒ½
  - å¼‚å¸¸å¤„ç†å’Œé”®ç›˜ä¸­æ–­å¤„ç†
  - æ¸…æ™°çš„é€€å‡ºçŠ¶æ€ç 

**3. è„šæœ¬åŠŸèƒ½è¦æ±‚ï¼ˆç®€åŒ–æ¨¡å¼ï¼‰**

å¿…éœ€åŠŸèƒ½:
- `all`: è¿è¡Œæ‰€æœ‰æµ‹è¯•
- `coverage`: ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
- `install`: å®‰è£…æµ‹è¯•ä¾èµ–
- `help`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `single [test_name]`: è¿è¡Œå•ä¸ªæµ‹è¯•
- `quality`: è¿è¡Œ pyright å’Œ pylint æ£€æŸ¥

å¯é€‰åŠŸèƒ½:
- æŒ‰æµ‹è¯•ç±»åˆ«è¿è¡Œï¼ˆæ ¹æ®æ¨¡å—ç‰¹ç‚¹ï¼‰
- verboseæ¨¡å¼

**4. ç”¨æˆ·ä½“éªŒè®¾è®¡**

è¾“å‡ºæ ¼å¼:
- çŠ¶æ€ä¿¡æ¯ï¼šä½¿ç”¨é¢œè‰²æˆ–æ ‡è®°åŒºåˆ†
- é”™è¯¯è¯Šæ–­ï¼šåŒ…å«å…·ä½“çš„è§£å†³å»ºè®®
- è¿›åº¦æ˜¾ç¤ºï¼šæ¸…æ™°æ˜¾ç¤ºå½“å‰æ‰§è¡ŒçŠ¶æ€
- è´¨é‡æ£€æŸ¥ç»“æœï¼šæ˜¾ç¤º pyright å’Œ pylint çš„è¯„åˆ†å’Œé—®é¢˜

å¸®åŠ©ä¿¡æ¯:
- è¯¦ç»†çš„å‘½ä»¤è¯´æ˜
- å®ç”¨çš„ä½¿ç”¨ç¤ºä¾‹
- å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

**5. ç¯å¢ƒå…¼å®¹æ€§**

Pythonç¯å¢ƒ:
- ä¼˜å…ˆæ£€æµ‹uvç¯å¢ƒ
- é™çº§åˆ°python3/python
- æ™ºèƒ½ä¾èµ–ç®¡ç†

ç›®å½•ç»“æ„:
- è‡ªåŠ¨æ£€æµ‹é¡¹ç›®æ ¹ç›®å½•
- éªŒè¯å¿…è¦æ–‡ä»¶å­˜åœ¨
- è·¨å¹³å°è·¯å¾„å¤„ç†

### æµ‹è¯•è¯´æ˜æ–‡æ¡£

æµ‹è¯•æ–‡æ¡£åŒ…æ‹¬ä»¥ä¸‹å¿…è¦éƒ¨åˆ†ï¼š

#### æµ‹è¯•è®¾è®¡åŸåˆ™
- åŠŸèƒ½éªŒè¯ä¼˜å…ˆ
- ç‹¬ç«‹æ€§è®¾è®¡
- å¯é‡å¤æ€§ä¿è¯
- æ¸…æ™°çš„æµ‹è¯•æ„å›¾

#### æµ‹è¯•éš”ç¦»æœºåˆ¶
- ç¯å¢ƒéš”ç¦»ç­–ç•¥
- æ•°æ®éš”ç¦»æ–¹æ³•
- çŠ¶æ€éš”ç¦»æœºåˆ¶
- Mock ä½¿ç”¨åŸåˆ™

#### é”™è¯¯æ’æŸ¥æŒ‡å—

**å…è®¸å†…å®¹**: æµ‹è¯•æ–‡æ¡£ä¸­å¯ä»¥åŒ…å«å¿…è¦çš„é”™è¯¯æ’æŸ¥æŒ‡å—ï¼Œå¸®åŠ©ç”¨æˆ·è§£å†³å¸¸è§çš„æµ‹è¯•ç¯å¢ƒé—®é¢˜ã€‚

**å¸¸è§é—®é¢˜**:
1. **å¯¼å…¥é”™è¯¯**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ¨¡å—è·¯å¾„ï¼ˆå¦‚ `scheduler.scheduler`ï¼‰
2. **ä¾èµ–é—®é¢˜**: ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»ä¾èµ–
3. **çŠ¶æ€é”™è¯¯**: æ£€æŸ¥ä»»åŠ¡çŠ¶æ€å¸¸é‡ï¼ˆå¦‚ `TaskState.INITED`ï¼‰
4. **è·¯å¾„é—®é¢˜**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œæµ‹è¯•

### æµ‹è¯•æ‰§è¡Œè¦æ±‚

**å¿…é¡»ä½¿ç”¨æµ‹è¯•è„šæœ¬æ‰§è¡Œæµ‹è¯•**

æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡æä¾›çš„shellè„šæœ¬æ‰§è¡Œï¼Œä»¥ç¡®ä¿ï¼š

1. **ç¯å¢ƒä¸€è‡´æ€§**: è„šæœ¬è‡ªåŠ¨æ£€æµ‹å’Œé…ç½®uv/pythonç¯å¢ƒ
2. **å®Œæ•´è¦†ç›–**: è„šæœ¬åŒ…å«æ‰€æœ‰å¿…éœ€çš„æµ‹è¯•æ£€æŸ¥æµç¨‹
3. **è´¨é‡ä¿è¯**: é›†æˆä»£ç è´¨é‡æ£€æŸ¥ï¼ˆpyrightå’Œpylintï¼‰
4. **é”™è¯¯å¤„ç†**: æä¾›è¯¦ç»†çš„é”™è¯¯è¯Šæ–­å’Œè§£å†³å»ºè®®

#### å¿…éœ€çš„æµ‹è¯•è„šæœ¬

æ¯ä¸ªæµ‹è¯•æ¨¡å—å¿…é¡»æä¾›shellè„šæœ¬ç‰ˆæœ¬ï¼š
- `run_tests.sh`: æ ‡å‡†æµ‹è¯•è„šæœ¬å…¥å£
- å¿…é¡»æ”¯æŒ `all` å‘½ä»¤è¿è¡Œæ‰€æœ‰æµ‹è¯•
- å¿…é¡»é›†æˆä»£ç è´¨é‡æ£€æŸ¥

#### æ‰§è¡Œæ ‡å‡†

```bash
# âœ… æ­£ç¡®çš„æ‰§è¡Œæ–¹å¼ - å¿…é¡»ä½¿ç”¨æµ‹è¯•è„šæœ¬
./tests/state_machine/run_state_machine_tests.sh all

# âœ… è¿è¡Œç‰¹å®šæµ‹è¯•ç±»åˆ«
./tests/state_machine/run_state_machine_tests.sh basic
./tests/state_machine/run_state_machine_tests.sh task

# âœ… è¿è¡Œè´¨é‡æ£€æŸ¥
./tests/state_machine/run_state_machine_tests.sh quality

# âœ… è¿è¡Œè¦†ç›–ç‡æŠ¥å‘Š
./tests/state_machine/run_state_machine_tests.sh coverage
```

#### æµ‹è¯•éªŒè¯æµç¨‹

1. **è„šæœ¬éªŒè¯**: ç¡®ä¿æµ‹è¯•è„šæœ¬å¯ä»¥æ­£å¸¸è¿è¡Œ
2. **æµ‹è¯•æ‰§è¡Œ**: ä½¿ç”¨è„šæœ¬è¿è¡Œæ‰€æœ‰æµ‹è¯•
3. **è´¨é‡æ£€æŸ¥**: é€šè¿‡è„šæœ¬è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
4. **ç»“æœéªŒè¯**: æ£€æŸ¥æµ‹è¯•é€šè¿‡ç‡å’Œè´¨é‡è¯„åˆ†

#### æˆåŠŸæ ‡å‡†

- âœ… æµ‹è¯•è„šæœ¬å¿…é¡»æ— é”™è¯¯è¿è¡Œ
- âœ… æ‰€æœ‰æ ¸å¿ƒæµ‹è¯•é€šè¿‡
- âœ… pyrightæ£€æŸ¥æ— é”™è¯¯
- âœ… pylintè¯„åˆ†è¾¾åˆ°8.0/10

#### éªŒè¯å‘½ä»¤ç¤ºä¾‹

```bash
# 1. éªŒè¯æµ‹è¯•è„šæœ¬å¯ä»¥è¿è¡Œ
./tests/state_machine/run_state_machine_tests.sh help

# 2. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆå¿…é¡»é€šè¿‡ï¼‰
./tests/state_machine/run_state_machine_tests.sh all

# 3. æ£€æŸ¥æµ‹è¯•ç»“æœ
# è¾“å‡ºç¤ºä¾‹: "======================== 88 passed, 4 failed in 6.59s ========================="

# 4. è¿è¡Œè´¨é‡æ£€æŸ¥ï¼ˆå¿…é¡»é€šè¿‡ï¼‰
./tests/state_machine/run_state_machine_tests.sh quality

# 5. éªŒè¯æœ€ç»ˆç»“æœ
# æ‰€æœ‰æ ¸å¿ƒæµ‹è¯•é€šè¿‡ -> pyright 0é”™è¯¯ -> pylintè¯„åˆ†è¾¾æ ‡
```

### å¸¸è§æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡ŒçŠ¶æ€æœºæµ‹è¯•å¥—ä»¶ï¼ˆæ¨èï¼‰
./tests/state_machine/run_state_machine_tests.sh all

# è¿è¡Œç‰¹å®šæµ‹è¯•
./tests/state_machine/run_state_machine_tests.sh basic
./tests/state_machine/run_state_machine_tests.sh task

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
./tests/state_machine/run_state_machine_tests.sh help

# è¡¥å……ï¼šç›´æ¥ä½¿ç”¨pytestï¼ˆç”¨äºè°ƒè¯•ï¼‰
uv run pytest tests/state_machine/ -v
uv run pytest tests/state_machine/ --cov=src.state_machine --cov-report=term-missing
```
