# 意图澄清工作流
## 一、工作流定位
本工作流为 **“需求意图澄清标准化执行流程”**，适用于需求接收者（如服务执行者、任务处理人员）在接收到用户需求/问题后，发现信息模糊、要素缺失或存在歧义时，通过标准化步骤引导用户补充信息，最终明确用户真实意图，为后续精准响应奠定基础，不针对智能体，仅规范人工或流程化执行的操作逻辑。


## 二、核心目标
1. 精准判定需求模糊点：快速识别用户表述中缺失的关键要素（对象、场景、范围、目标等）或存在的歧义（多解读方向），避免盲目响应。
2. 标准化引导补全信息：通过可落地的提问规则，引导用户逐步补充缺失信息，降低沟通成本，确保信息补全效率。
3. 闭环确认意图：在用户补充信息后，验证是否满足“无模糊、无歧义、要素完整”标准，确保最终意图与用户真实需求一致。


## 三、执行步骤（核心环节）
### 步骤1：需求接收与清晰度判定
接收用户需求后，首先执行“意图清晰度判定”，若满足以下任一“模糊标准”，启动澄清流程；若信息完整、意图唯一，直接进入后续响应环节。

| 模糊类型                | 判定标准                                                                 | 示例说明                                                                 |
|-------------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| 1. 核心要素缺失         | 需求未包含“对象、场景、范围、目标”中至少1个关键信息                        | 用户说“帮我找资料”→ 缺失“资料主题（对象）、用途（目标）、形式（范围）”；用户说“推荐个好的”→ 缺失“推荐品类（对象）、评价标准（目标）” |
| 2. 表述存在歧义         | 同一需求可解读为2个及以上不同意图，且无信息支撑唯一方向                    | 用户说“帮我处理文件”→ 可解读为“编辑内容”“转换格式”“分类整理”；用户说“订个票”→ 可解读为“火车票”“电影票”“机票” |
| 3. 约束条件未明确       | 需求未提及“预算、时间、偏好、禁忌”等影响响应方向的限制因素                | 用户说“选个礼物”→ 缺失“收礼人（对象）、预算（约束）、兴趣（偏好）”；用户说“安排行程”→ 缺失“目的地（对象）、时间（约束）、出行人数（偏好）” |


### 步骤2：提问引导执行（关键操作）
根据“步骤1”判定的模糊类型，按以下规则执行提问，引导用户补充信息：

#### 1. 提问执行原则
- 聚焦性：仅针对“当前缺失的关键要素”提问，不涉及无关信息。例：用户说“找历史资料”，仅问“资料用于学习（如考研）还是兴趣阅读？需要哪一阶段的历史（如中国古代史/世界近代史）？”，不问“是否需要打印？”。
- 递进性：先问“核心缺失要素”（如品类、对象），再问“细节补充要素”（如预算、偏好）。例：用户说“买家电”→ 先问“想买哪类家电（如冰箱/洗衣机）？”，再问“预算范围是多少？”。
- 简洁性：单轮提问不超过2个核心问题，用短句表达，避免复杂句式。例：不说“为精准推荐，请告知家电品类及预算”，而说“你想选哪类家电呀？预算大概多少呢？”。
- 中立性：不预设答案，用开放式提问，避免诱导。例：不说“你是要找考研用的历史资料吧？”，而说“你找历史资料是用于学习考试还是兴趣阅读呀？”。

#### 2. 场景化执行示例
| 用户模糊需求       | 模糊类型       | 提问执行操作（按递进顺序）                                                                 |
|--------------------|----------------|------------------------------------------------------------------------------------------|
| “帮我写个报告”     | 核心要素缺失   | 1. 先问“报告的主题是什么（如市场分析/项目总结）？”；2. 再问“报告需要多少字数？有无固定格式要求？” |
| “选个手机”         | 约束条件不明   | 1. 先问“选手机更看重拍照、续航还是性能？”；2. 再问“预算在哪个区间（如2000-3000元/3000-5000元）？” |
| “修个东西”         | 核心要素缺失   | 1. 先问“需要维修的物品是什么（如空调/洗衣机/家具）？”；2. 再问“物品具体故障是什么（如不制冷/不脱水）？” |


### 步骤3：意图确认与流程收尾
用户补充信息后，执行“意图完整性验证”，按以下规则推进：
1. 验证标准：需求需满足“无核心要素缺失、无歧义、约束条件明确”，即能基于补充信息确定唯一响应方向。
2. 若验证通过：执行“意图复述确认”，向用户反馈“我理解的需求是XX，对吗？”，确认一致后，终止澄清流程，进入需求响应环节。
3. 若验证不通过（仍有模糊点）：返回“步骤2”，针对新的模糊点（如用户补充“找历史资料用于学习”，但未说明“学习阶段”）继续提问，直至验证通过。


## 四、输出要求
1. 本工作流的执行结果需形成“意图澄清记录”，包含：用户原始需求、模糊点判定结果、提问内容、用户补充信息、最终确认意图，记录需完整可追溯。
2. 若为线上流程，最终确认意图需以“用户明确认可”（如“是的”“对的”）为依据，不默认推断。
3. 所有执行环节需在\<final_output>标签内呈现完整流程记录，未按此要求记录视为流程未完成。


## 五、工作流执行注意事项
1. 不跳过判定步骤：无论需求看似“接近清晰”，均需执行“步骤1”判定，避免遗漏隐性模糊点（如用户说“买个千元内的手机”，未说“用途”，需判定为“约束条件部分缺失”）。
2. 不超额提问：仅提问“补充意图所需的关键信息”，不追问无关内容（如用户补充“买手机用于日常通讯”，无需问“是否需要5G？”，除非“网络需求”影响推荐方向）。
3. 不中断用户表述：用户补充信息时，需待其表述完毕后再判定是否需继续提问，不中途打断。
4. 及时收尾：一旦意图确认通过，立即终止澄清流程，不额外延长沟通。


## 六、流程执行示例参考
1. 用户原始需求：“帮我选个礼物”  
2. 步骤1判定：核心要素缺失（收礼人、预算）+ 约束条件不明（偏好）  
3. 步骤2提问：“想了解下，礼物是送给谁呀？比如朋友、家人还是同事？另外预算大概在什么范围呢？”  
4. 用户补充：“送给女性朋友，预算200-300元”  
5. 步骤1二次判定：仍缺“收礼人偏好”（约束条件不明）  
6. 步骤2二次提问：“那你朋友平时有什么兴趣吗？比如画画、护肤、运动之类的？”  
7. 用户补充：“她喜欢画画”  
8. 步骤3验证：要素完整（对象：女性朋友；预算：200-300元；偏好：画画），无歧义  
9. 步骤3收尾：“我理解的是，你需要为喜欢画画的女性朋友选200-300元的礼物，对吗？”  
10. 用户确认：“是的” → 澄清流程终止，进入礼物推荐环节